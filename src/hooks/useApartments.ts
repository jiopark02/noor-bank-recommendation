import { useState, useEffect, useCallback } from 'react';
import { Apartment } from '@/types/database';

// Mock data for development - Real apartments near each university (NO DORMS)
const MOCK_APARTMENTS: Apartment[] = [
  // ===== STANFORD =====
  {
    id: 'stanford-1',
    name: 'Oak Creek Apartments',
    address: '1600 Sand Hill Rd, Palo Alto, CA 94304',
    university: 'Stanford',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1-2',
    price_min: 2800,
    price_max: 4200,
    sqft_min: 550,
    sqft_max: 1100,
    walking_minutes: 15,
    biking_minutes: 5,
    transit_minutes: 20,
    driving_minutes: 5,
    rating: 4.6,
    review_count: 89,
    available_units: 4,
    pet_policy: 'Cats and small dogs allowed',
    furnished: false,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'stanford-2',
    name: 'Palo Alto Place',
    address: '565 Arastradero Rd, Palo Alto, CA 94306',
    university: 'Stanford',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 3200,
    price_max: 5500,
    sqft_min: 700,
    sqft_max: 1400,
    walking_minutes: 20,
    biking_minutes: 8,
    transit_minutes: 25,
    driving_minutes: 7,
    rating: 4.7,
    review_count: 124,
    available_units: 6,
    pet_policy: 'Pets welcome with deposit',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'stanford-3',
    name: 'The Cardinal Residences',
    address: '800 High St, Palo Alto, CA 94301',
    university: 'Stanford',
    bedrooms: 'Studio - 1BR',
    bathrooms: '1',
    price_min: 2400,
    price_max: 3100,
    sqft_min: 450,
    sqft_max: 650,
    walking_minutes: 12,
    biking_minutes: 4,
    transit_minutes: 15,
    driving_minutes: 4,
    rating: 4.4,
    review_count: 67,
    available_units: 3,
    pet_policy: 'No pets',
    furnished: true,
    gym: false,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== UC BERKELEY =====
  {
    id: 'berkeley-1',
    name: 'The Standard Berkeley',
    address: '2438 Durant Ave, Berkeley, CA 94704',
    university: 'UC Berkeley',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1-2',
    price_min: 2200,
    price_max: 3400,
    sqft_min: 400,
    sqft_max: 900,
    walking_minutes: 5,
    biking_minutes: 2,
    transit_minutes: 8,
    driving_minutes: 3,
    rating: 4.5,
    review_count: 156,
    available_units: 8,
    pet_policy: 'No pets',
    furnished: true,
    gym: true,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'berkeley-2',
    name: 'Hillside Apartments',
    address: '2600 Bancroft Way, Berkeley, CA 94704',
    university: 'UC Berkeley',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 1800,
    price_max: 3200,
    sqft_min: 550,
    sqft_max: 1100,
    walking_minutes: 8,
    biking_minutes: 3,
    transit_minutes: 12,
    driving_minutes: 5,
    rating: 4.3,
    review_count: 98,
    available_units: 5,
    pet_policy: 'Cats allowed',
    furnished: false,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'berkeley-3',
    name: 'Parker Apartments',
    address: '2401 Dwight Way, Berkeley, CA 94704',
    university: 'UC Berkeley',
    bedrooms: 'Studio - 1BR',
    bathrooms: '1',
    price_min: 1600,
    price_max: 2200,
    sqft_min: 350,
    sqft_max: 550,
    walking_minutes: 6,
    biking_minutes: 2,
    transit_minutes: 10,
    driving_minutes: 4,
    rating: 4.1,
    review_count: 72,
    available_units: 4,
    pet_policy: 'Small pets with deposit',
    furnished: true,
    gym: false,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1574362848149-11496d93a7c7?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== UIUC =====
  {
    id: 'uiuc-1',
    name: 'HERE Champaign',
    address: '308 E Green St, Champaign, IL 61820',
    university: 'UIUC',
    bedrooms: 'Studio - 4BR',
    bathrooms: '1-2',
    price_min: 800,
    price_max: 1600,
    sqft_min: 400,
    sqft_max: 1200,
    walking_minutes: 5,
    biking_minutes: 2,
    transit_minutes: 8,
    driving_minutes: 3,
    rating: 4.4,
    review_count: 234,
    available_units: 12,
    pet_policy: 'Pets welcome',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1567496898669-ee935f5f647a?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'uiuc-2',
    name: 'The Dean Campustown',
    address: '709 S Wright St, Champaign, IL 61820',
    university: 'UIUC',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 900,
    price_max: 1800,
    sqft_min: 500,
    sqft_max: 1100,
    walking_minutes: 3,
    biking_minutes: 1,
    transit_minutes: 5,
    driving_minutes: 2,
    rating: 4.6,
    review_count: 187,
    available_units: 8,
    pet_policy: 'No pets',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1580041065738-e72023775cdc?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'uiuc-3',
    name: 'Green Street Tower',
    address: '510 E Green St, Champaign, IL 61820',
    university: 'UIUC',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1',
    price_min: 700,
    price_max: 1200,
    sqft_min: 350,
    sqft_max: 800,
    walking_minutes: 4,
    biking_minutes: 2,
    transit_minutes: 7,
    driving_minutes: 3,
    rating: 4.2,
    review_count: 145,
    available_units: 6,
    pet_policy: 'Cats only',
    furnished: false,
    gym: true,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== USC =====
  {
    id: 'usc-1',
    name: 'Lorenzo',
    address: '325 W Adams Blvd, Los Angeles, CA 90007',
    university: 'USC',
    bedrooms: 'Studio - 4BR',
    bathrooms: '1-2',
    price_min: 1400,
    price_max: 2800,
    sqft_min: 400,
    sqft_max: 1200,
    walking_minutes: 8,
    biking_minutes: 3,
    transit_minutes: 12,
    driving_minutes: 5,
    rating: 4.5,
    review_count: 312,
    available_units: 15,
    pet_policy: 'Pets welcome with deposit',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1515263487990-61b07816b324?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'usc-2',
    name: 'Tuscany Apartments',
    address: '1015 W 23rd St, Los Angeles, CA 90007',
    university: 'USC',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 1600,
    price_max: 3200,
    sqft_min: 550,
    sqft_max: 1100,
    walking_minutes: 5,
    biking_minutes: 2,
    transit_minutes: 8,
    driving_minutes: 3,
    rating: 4.3,
    review_count: 198,
    available_units: 7,
    pet_policy: 'Small dogs allowed',
    furnished: false,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1460317442991-0ec209397118?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'usc-3',
    name: 'The Reef',
    address: '1933 S Broadway, Los Angeles, CA 90007',
    university: 'USC',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1',
    price_min: 1200,
    price_max: 2100,
    sqft_min: 380,
    sqft_max: 750,
    walking_minutes: 12,
    biking_minutes: 4,
    transit_minutes: 15,
    driving_minutes: 6,
    rating: 4.1,
    review_count: 156,
    available_units: 9,
    pet_policy: 'No pets',
    furnished: true,
    gym: false,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1524813686514-a57563d77965?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== UCLA =====
  {
    id: 'ucla-1',
    name: 'Gayley Heights',
    address: '535 Gayley Ave, Los Angeles, CA 90024',
    university: 'UCLA',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1-2',
    price_min: 2200,
    price_max: 3800,
    sqft_min: 450,
    sqft_max: 950,
    walking_minutes: 6,
    biking_minutes: 2,
    transit_minutes: 10,
    driving_minutes: 4,
    rating: 4.5,
    review_count: 178,
    available_units: 6,
    pet_policy: 'Cats allowed',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'ucla-2',
    name: 'Glenrock Apartments',
    address: '750 Glenrock Ave, Los Angeles, CA 90024',
    university: 'UCLA',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 2400,
    price_max: 4200,
    sqft_min: 600,
    sqft_max: 1200,
    walking_minutes: 8,
    biking_minutes: 3,
    transit_minutes: 12,
    driving_minutes: 5,
    rating: 4.4,
    review_count: 145,
    available_units: 5,
    pet_policy: 'Pets welcome',
    furnished: false,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'ucla-3',
    name: 'Westwood Village Apartments',
    address: '10995 Le Conte Ave, Los Angeles, CA 90024',
    university: 'UCLA',
    bedrooms: 'Studio - 1BR',
    bathrooms: '1',
    price_min: 1900,
    price_max: 2600,
    sqft_min: 380,
    sqft_max: 580,
    walking_minutes: 4,
    biking_minutes: 1,
    transit_minutes: 6,
    driving_minutes: 2,
    rating: 4.2,
    review_count: 112,
    available_units: 4,
    pet_policy: 'No pets',
    furnished: true,
    gym: false,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== COLUMBIA =====
  {
    id: 'columbia-1',
    name: 'The Ariel West',
    address: '2628 Broadway, New York, NY 10025',
    university: 'Columbia',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1-2',
    price_min: 3200,
    price_max: 5500,
    sqft_min: 450,
    sqft_max: 950,
    walking_minutes: 8,
    biking_minutes: 3,
    transit_minutes: 10,
    driving_minutes: 6,
    rating: 4.6,
    review_count: 134,
    available_units: 5,
    pet_policy: 'Pets welcome with fee',
    furnished: true,
    gym: true,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'columbia-2',
    name: 'Cathedral Gardens',
    address: '123 W 109th St, New York, NY 10025',
    university: 'Columbia',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 2800,
    price_max: 4800,
    sqft_min: 550,
    sqft_max: 1100,
    walking_minutes: 5,
    biking_minutes: 2,
    transit_minutes: 8,
    driving_minutes: 5,
    rating: 4.4,
    review_count: 98,
    available_units: 4,
    pet_policy: 'Cats only',
    furnished: false,
    gym: true,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'columbia-3',
    name: 'River Terrace',
    address: '515 W 122nd St, New York, NY 10027',
    university: 'Columbia',
    bedrooms: 'Studio - 1BR',
    bathrooms: '1',
    price_min: 2400,
    price_max: 3200,
    sqft_min: 380,
    sqft_max: 550,
    walking_minutes: 3,
    biking_minutes: 1,
    transit_minutes: 5,
    driving_minutes: 3,
    rating: 4.2,
    review_count: 76,
    available_units: 6,
    pet_policy: 'No pets',
    furnished: true,
    gym: false,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== NYU =====
  {
    id: 'nyu-1',
    name: 'Gramercy Park Apartments',
    address: '7 Gramercy Park West, New York, NY 10003',
    university: 'NYU',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1-2',
    price_min: 3500,
    price_max: 6000,
    sqft_min: 450,
    sqft_max: 1000,
    walking_minutes: 12,
    biking_minutes: 5,
    transit_minutes: 15,
    driving_minutes: 8,
    rating: 4.7,
    review_count: 156,
    available_units: 4,
    pet_policy: 'Pets welcome',
    furnished: true,
    gym: true,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'nyu-2',
    name: 'The Foundry',
    address: '42 E 12th St, New York, NY 10003',
    university: 'NYU',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 3200,
    price_max: 5200,
    sqft_min: 550,
    sqft_max: 1100,
    walking_minutes: 5,
    biking_minutes: 2,
    transit_minutes: 8,
    driving_minutes: 5,
    rating: 4.5,
    review_count: 187,
    available_units: 6,
    pet_policy: 'Small pets with deposit',
    furnished: false,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'nyu-3',
    name: 'Stuyvesant Town',
    address: '333 E 14th St, New York, NY 10003',
    university: 'NYU',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1',
    price_min: 2600,
    price_max: 4200,
    sqft_min: 400,
    sqft_max: 850,
    walking_minutes: 10,
    biking_minutes: 4,
    transit_minutes: 12,
    driving_minutes: 7,
    rating: 4.3,
    review_count: 234,
    available_units: 12,
    pet_policy: 'Pets allowed',
    furnished: false,
    gym: true,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600573472550-8090b5e0745e?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== CORNELL =====
  {
    id: 'cornell-1',
    name: 'Collegetown Terrace',
    address: '312 College Ave, Ithaca, NY 14850',
    university: 'Cornell',
    bedrooms: 'Studio - 4BR',
    bathrooms: '1-2',
    price_min: 1200,
    price_max: 2400,
    sqft_min: 400,
    sqft_max: 1200,
    walking_minutes: 5,
    biking_minutes: 2,
    transit_minutes: 8,
    driving_minutes: 3,
    rating: 4.4,
    review_count: 167,
    available_units: 8,
    pet_policy: 'Cats allowed',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'cornell-2',
    name: 'The Edge Ithaca',
    address: '215 Dryden Rd, Ithaca, NY 14850',
    university: 'Cornell',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 1400,
    price_max: 2800,
    sqft_min: 550,
    sqft_max: 1100,
    walking_minutes: 8,
    biking_minutes: 3,
    transit_minutes: 10,
    driving_minutes: 4,
    rating: 4.5,
    review_count: 134,
    available_units: 6,
    pet_policy: 'Pets welcome',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600585154363-67eb9e2e2099?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'cornell-3',
    name: 'Maplewood Park Apartments',
    address: '110 Maple Ave, Ithaca, NY 14850',
    university: 'Cornell',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1',
    price_min: 1000,
    price_max: 1800,
    sqft_min: 380,
    sqft_max: 750,
    walking_minutes: 12,
    biking_minutes: 5,
    transit_minutes: 15,
    driving_minutes: 6,
    rating: 4.1,
    review_count: 89,
    available_units: 5,
    pet_policy: 'No pets',
    furnished: false,
    gym: false,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600047509358-9dc75507daeb?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== NORTHEASTERN =====
  {
    id: 'northeastern-1',
    name: 'LightView',
    address: '774 Columbus Ave, Boston, MA 02120',
    university: 'Northeastern',
    bedrooms: 'Studio - 4BR',
    bathrooms: '1-2',
    price_min: 1800,
    price_max: 3200,
    sqft_min: 400,
    sqft_max: 1100,
    walking_minutes: 5,
    biking_minutes: 2,
    transit_minutes: 8,
    driving_minutes: 4,
    rating: 4.6,
    review_count: 245,
    available_units: 10,
    pet_policy: 'Pets welcome',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600607687644-aac4c3eac7f4?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'northeastern-2',
    name: 'The Viridian',
    address: '1282 Boylston St, Boston, MA 02115',
    university: 'Northeastern',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 2200,
    price_max: 4000,
    sqft_min: 550,
    sqft_max: 1200,
    walking_minutes: 8,
    biking_minutes: 3,
    transit_minutes: 10,
    driving_minutes: 5,
    rating: 4.5,
    review_count: 178,
    available_units: 7,
    pet_policy: 'Small pets allowed',
    furnished: false,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600566752355-35792bedcfea?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'northeastern-3',
    name: '319 A Street',
    address: '319 A St, Boston, MA 02210',
    university: 'Northeastern',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1',
    price_min: 2000,
    price_max: 3400,
    sqft_min: 420,
    sqft_max: 850,
    walking_minutes: 15,
    biking_minutes: 6,
    transit_minutes: 18,
    driving_minutes: 8,
    rating: 4.3,
    review_count: 112,
    available_units: 5,
    pet_policy: 'Cats only',
    furnished: true,
    gym: true,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600573472591-ee6c563aba25?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== UC IRVINE =====
  {
    id: 'ucirvine-1',
    name: 'Camino del Sol',
    address: '3900 Michelson Dr, Irvine, CA 92612',
    university: 'UC Irvine',
    bedrooms: 'Studio - 3BR',
    bathrooms: '1-2',
    price_min: 1800,
    price_max: 3200,
    sqft_min: 450,
    sqft_max: 1100,
    walking_minutes: 10,
    biking_minutes: 4,
    transit_minutes: 15,
    driving_minutes: 5,
    rating: 4.5,
    review_count: 189,
    available_units: 8,
    pet_policy: 'Pets welcome with deposit',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600585152220-90363fe7e115?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'ucirvine-2',
    name: 'Vista del Campo Norte',
    address: '4201 Campus Dr, Irvine, CA 92612',
    university: 'UC Irvine',
    bedrooms: '1BR - 4BR',
    bathrooms: '1-2',
    price_min: 1600,
    price_max: 2800,
    sqft_min: 500,
    sqft_max: 1200,
    walking_minutes: 5,
    biking_minutes: 2,
    transit_minutes: 8,
    driving_minutes: 3,
    rating: 4.4,
    review_count: 234,
    available_units: 12,
    pet_policy: 'No pets',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'ucirvine-3',
    name: 'Puerta del Sol',
    address: '3800 Irvine Ave, Irvine, CA 92602',
    university: 'UC Irvine',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1',
    price_min: 1500,
    price_max: 2400,
    sqft_min: 400,
    sqft_max: 850,
    walking_minutes: 12,
    biking_minutes: 5,
    transit_minutes: 18,
    driving_minutes: 6,
    rating: 4.2,
    review_count: 145,
    available_units: 6,
    pet_policy: 'Cats allowed',
    furnished: false,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600585153490-76fb20a32601?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },

  // ===== BOSTON U =====
  {
    id: 'bostonu-1',
    name: 'One Greenway',
    address: '99 Kneeland St, Boston, MA 02111',
    university: 'Boston U',
    bedrooms: 'Studio - 3BR',
    bathrooms: '1-2',
    price_min: 2400,
    price_max: 4200,
    sqft_min: 450,
    sqft_max: 1100,
    walking_minutes: 15,
    biking_minutes: 6,
    transit_minutes: 12,
    driving_minutes: 8,
    rating: 4.6,
    review_count: 167,
    available_units: 6,
    pet_policy: 'Pets welcome',
    furnished: true,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600573472591-ee6c563aba25?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'bostonu-2',
    name: 'Studio Allston',
    address: '88 Brighton Ave, Boston, MA 02134',
    university: 'Boston U',
    bedrooms: 'Studio - 2BR',
    bathrooms: '1',
    price_min: 1800,
    price_max: 2800,
    sqft_min: 380,
    sqft_max: 800,
    walking_minutes: 10,
    biking_minutes: 4,
    transit_minutes: 15,
    driving_minutes: 6,
    rating: 4.4,
    review_count: 198,
    available_units: 9,
    pet_policy: 'Small pets allowed',
    furnished: true,
    gym: true,
    parking: false,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
  {
    id: 'bostonu-3',
    name: 'The Van Ness',
    address: '1325 Boylston St, Boston, MA 02215',
    university: 'Boston U',
    bedrooms: '1BR - 3BR',
    bathrooms: '1-2',
    price_min: 2200,
    price_max: 3800,
    sqft_min: 550,
    sqft_max: 1100,
    walking_minutes: 8,
    biking_minutes: 3,
    transit_minutes: 10,
    driving_minutes: 5,
    rating: 4.5,
    review_count: 145,
    available_units: 5,
    pet_policy: 'Cats only',
    furnished: false,
    gym: true,
    parking: true,
    woman_only: false,
    verified: true,
    images: ['https://images.unsplash.com/photo-1600047509782-20d39509f26d?w=800&h=600&fit=crop'],
    created_at: '2026-01-01',
    updated_at: '2026-01-15',
  },
];

interface UseApartmentsOptions {
  limit?: number;
  filters?: {
    gym?: boolean;
    furnished?: boolean;
    parking?: boolean;
  };
  autoFetch?: boolean;
}

interface UseApartmentsReturn {
  apartments: Apartment[];
  isLoading: boolean;
  error: string | null;
  total: number;
  refetch: () => Promise<void>;
}

export function useApartments({
  limit = 20,
  filters = {},
  autoFetch = true,
}: UseApartmentsOptions = {}): UseApartmentsReturn {
  const [apartments, setApartments] = useState<Apartment[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [total, setTotal] = useState(0);

  const fetchApartments = useCallback(async () => {
    setIsLoading(true);
    setError(null);

    try {
      const params = new URLSearchParams();
      params.set('limit', limit.toString());
      if (filters.gym) params.set('gym', 'true');
      if (filters.furnished) params.set('furnished', 'true');
      if (filters.parking) params.set('parking', 'true');

      const response = await fetch(`/api/apartments?${params}`);

      if (!response.ok) {
        throw new Error('Failed to fetch apartments');
      }

      const data = await response.json();
      setApartments(data.data);
      setTotal(data.meta.total);
    } catch (err) {
      // Use mock data on error
      let filtered = [...MOCK_APARTMENTS];
      if (filters.gym) filtered = filtered.filter(a => a.gym);
      if (filters.furnished) filtered = filtered.filter(a => a.furnished);
      if (filters.parking) filtered = filtered.filter(a => a.parking);
      setApartments(filtered.slice(0, limit));
      setTotal(filtered.length);
      setError(null);
    } finally {
      setIsLoading(false);
    }
  }, [limit, filters.gym, filters.furnished, filters.parking]);

  useEffect(() => {
    if (autoFetch) {
      fetchApartments();
    }
  }, [autoFetch, fetchApartments]);

  return {
    apartments,
    isLoading,
    error,
    total,
    refetch: fetchApartments,
  };
}
